<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contraption Masters</title>
    <style>
        body {
            font-family: sans-serif;
            margin: 20px;
            background-color: #f0f0f0;
        }
        #game-container {
            width: 800px;
            margin: 0 auto;
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        h1 {
            color: #3366cc;
            text-align: center;
        }
        #blueprint-display, #resource-display, #simulation-area, #crew-display {
            border: 1px solid #ddd;
            padding: 10px;
            margin-bottom: 15px;
            background-color: #f9f9f9;
            border-radius: 5px;
        }
        .resource-item {
            display: inline-block;
            margin-right: 10px;
        }
        .crew-member {
            display: inline-block;
            margin-right: 10px;
        }
        #simulation-area {
            height: 400px;
            background-color: #e0e0e0;
            position: relative;
        }
        #build-controls button {
            margin-right: 5px;
            padding: 5px 10px;
        }
        #message-area {
            margin-top: 10px;
            padding: 5px;
            border: 1px solid #ddd;
            background-color: white;
        }
    </style>
</head>
<body>
    <div id="game-container">
        <h1>Contraption Masters</h1>

        <div id="blueprint-display">
            <h2>Blueprint:</h2>
            <p id="blueprint-details">Load a new blueprint...</p>
        </div>

        <div id="resource-display">
            <h2>Resources:</h2>
            <div id="resource-list"></div>
        </div>

        <div id="crew-display">
            <h2>Crew:</h2>
            <div id="crew-list"></div>
        </div>

        <div id="build-controls">
            <button onclick="build('wood')">Build Wood</button>
            <button onclick="build('steel')">Build Steel</button>
            <button onclick="simulate()">Simulate</button>
            <button onclick="newBlueprint()">New Blueprint</button>
        </div>

        <div id="simulation-area">
            </div>

        <div id="message-area">
            <p id="message">Welcome to Contraption Masters!</p>
        </div>

    </div>

    <script>
        let resources = { wood: 100, steel: 50 };
        let crew = [{ name: "Bob", skill: "engineering" }, { name: "Alice", skill: "logistics" }];
        let currentBlueprint = null;
        let simulationRunning = false;

        function updateResources() {
            let resourceList = document.getElementById("resource-list");
            resourceList.innerHTML = "";
            for (let resource in resources) {
                resourceList.innerHTML += `<span class="resource-item">${resource}: ${resources[resource]}</span>`;
            }
        }

        function updateCrew() {
             let crewList = document.getElementById("crew-list");
             crewList.innerHTML = "";
             crew.forEach(member => {
                crewList.innerHTML += `<span class="crew-member">${member.name} (${member.skill})</span>`
             });
        }

        function newBlueprint() {
            // Placeholder: Generate a random blueprint or fetch from a list
            currentBlueprint = {
                description: "Build a bridge across a 100-meter gap, supporting a heavy truck.",
                requirements: { wood: 50, steel: 25 },
                constraints: { weather: "rain", budget: 150 }
            };
            document.getElementById("blueprint-details").textContent = currentBlueprint.description;
            setMessage(`New Blueprint loaded: ${currentBlueprint.description}`);
        }

        function build(material) {
            if (simulationRunning) return;
            if (resources[material] > 0) {
                resources[material]--;
                updateResources();
                // Add visual representation of building in the simulation area
                let simulationArea = document.getElementById("simulation-area");
                let newElement = document.createElement("div");
                newElement.style.position = "absolute";
                newElement.style.width = "20px";
                newElement.style.height = "10px";
                newElement.style.backgroundColor = material === "wood" ? "brown" : "gray";
                newElement.style.left = Math.random() * 780 + "px";
                newElement.style.top = Math.random() * 380 + "px";
                simulationArea.appendChild(newElement);
                setMessage(`Built with ${material}.`);
            } else {
                setMessage(`Not enough ${material}.`);
            }
        }

        function simulate() {
            if (simulationRunning) return;
            simulationRunning = true;
            setMessage("Simulating...");
            // Placeholder: Simulate the bridge's stability and handle failures
            setTimeout(() => {
                let success = Math.random() > 0.3; // 70% chance of success for now
                if (success) {
                    setMessage("Simulation successful!");
                } else {
                    setMessage("Simulation failed! Bridge collapsed.");
                }
                simulationRunning = false;
            }, 2000);
        }

        function setMessage(message) {
            document.getElementById("message").textContent = message;
        }

        updateResources();
        updateCrew();

    </script>
</body>
</html>
